(function(j){var m={className:"autosizejs",append:"",callback:!1},d="hidden",b="border-box",g="lineHeight",p='<textarea tabindex="-1" style="position:absolute; top:-9999px; left:-9999px; right:auto; bottom:auto; -moz-box-sizing:content-box; -webkit-box-sizing:content-box; box-sizing:content-box; word-wrap:break-word; height:0 !important; min-height:0 !important; overflow:hidden;"/>',c=["fontFamily","fontSize","fontWeight","fontStyle","letterSpacing","textTransform","wordSpacing","textIndent"],l="oninput",k="onpropertychange",h=j(p)[0];h.setAttribute(l,"return"),j.isFunction(h[l])||k in h?(j(h).css(g,"99px"),j(h).css(g)==="99px"&&c.push(g),j.fn.autosize=function(a){return a=j.extend({},m,a||{}),this.each(function(){function x(){var v,t,f;e||(e=!0,n.value=A.value+a.append,n.style.overflowY=A.style.overflowY,f=parseInt(A.style.height,10),n.style.width=r.css("width"),n.scrollTop=0,n.scrollTop=90000,v=n.scrollTop,t=d,v>o?(v=o,t="scroll"):v<u&&(v=u),v+=i,A.style.overflowY=t,f!==v&&(A.style.height=v+"px",w&&a.callback.call(A)),setTimeout(function(){e=!1},1))}var A=this,r=j(A),n,u=r.height(),o=parseInt(r.css("maxHeight"),10),e,s=c.length,z,i=0,q=A.value,w=j.isFunction(a.callback);if(r.css("box-sizing")===b||r.css("-moz-box-sizing")===b||r.css("-webkit-box-sizing")===b){i=r.outerHeight()-r.height()}if(r.data("mirror")||r.data("ismirror")){return}n=j(p).data("ismirror",!0).addClass(a.className)[0],z=r.css("resize")==="none"?"none":"horizontal",r.data("mirror",j(n)).css({overflow:d,overflowY:d,wordWrap:"break-word",resize:z}),o=o&&o>0?o:90000;while(s--){n.style[c[s]]=r.css(c[s])}j("body").append(n),k in A?l in A?A[l]=A.onkeyup=x:A[k]=x:(A[l]=x,A.value="",A.value=q),j(window).resize(x),r.bind("autosize",x),x()})}):j.fn.autosize=function(a){return this}})(jQuery);